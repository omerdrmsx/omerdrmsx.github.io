<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒ∞yi Ki Doƒüdun Sevgilim</title>
    
    <!-- Tailwind CSS K√ºt√ºphanesi --><script src="https://cdn.tailwindcss.com"></script>
    <!-- Tone.js M√ºzik K√ºt√ºphanesi --><script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <style>
        /* Ana Stil ve Animasyonlar */
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f8f0fc 0%, #ffe0f6 100%); /* Ba≈ülangƒ±√ß hafif gradyan */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            transition: background 2s ease-in-out; /* Romantik arka plan ge√ßi≈üi i√ßin */
            position: relative; /* √ái√ßekler i√ßin */
        }

        /* Romantik Arka Plan Animasyonu */
        @keyframes romanticGlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .romantic-bg {
            /* S√ºrekli hareket eden, yumu≈üak pembe-mor gradyan */
            background: linear-gradient(135deg, #ffc0cb, #f48fb1, #e1bee7);
            background-size: 400% 400%;
            animation: romanticGlow 15s ease infinite;
        }

        /* √ái√ßek Arka Planƒ± */
        .flower-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><filter id="f1" x="0" y="0" width="200%" height="200%"><feGaussianBlur in="SourceGraphic" stdDeviation="2"/></filter></defs><g style="filter:url(#f1); opacity:0.3;"><path d="M50 0 L60 40 L100 50 L60 60 L50 100 L40 60 L0 50 L40 40 Z" fill="%23ff69b4"/><path d="M50 20 L55 45 L80 50 L55 55 L50 80 L45 55 L20 50 L45 45 Z" fill="%23dda0dd"/></g></svg>');
            background-size: 150px 150px;
            opacity: 0.2;
            pointer-events: none;
            z-index: 1;
            animation: flowerMove 30s linear infinite alternate;
        }

        @keyframes flowerMove {
            0% { background-position: 0% 0%; transform: scale(1); }
            100% { background-position: 100% 100%; transform: scale(1.1); }
        }


        /* Ekran Parlama Efekti */
        @keyframes fullScreenGlow {
            0% { box-shadow: 0 0 0px 0px rgba(255, 105, 180, 0); }
            50% { box-shadow: 0 0 100px 50px rgba(255, 105, 180, 0.8); }
            100% { box-shadow: 0 0 0px 0px rgba(255, 105, 180, 0); }
        }

        .glow-effect {
            animation: fullScreenGlow 1.5s ease-out forwards;
        }

        /* Hediye Kutusu Stili */
        .gift-box {
            width: 200px;
            height: 200px;
            background-color: #e91e63;
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.5s ease;
            position: relative;
            cursor: pointer;
            z-index: 100; /* Her zaman en √ºstte */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
        }

        .gift-box:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }
        
        /* Kutu Tƒ±klanƒ±nca Geri √áekilme Efekti */
        .gift-box.retracting {
            transform: scale(0.9);
            transition: transform 0.1s ease-out;
        }

        /* Kurdele Stili */
        .ribbon-h, .ribbon-v {
            position: absolute;
            background-color: #ffd700;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
        }

        .ribbon-h {
            width: 100%;
            height: 30px;
            top: 50%;
            transform: translateY(-50%);
        }

        .ribbon-v {
            width: 30px;
            height: 100%;
            left: 50%;
            transform: translateX(-50%);
        }

        /* Kutu Kapaƒüƒ± */
        .box-lid {
            position: absolute;
            top: 0;
            width: 100%;
            height: 40px;
            background-color: #f48fb1;
            border-radius: 12px 12px 0 0;
            transition: transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1.2), opacity 0.6s ease-out;
            transform-origin: bottom center;
            z-index: 110;
        }
        
        /* ƒ∞√ßerik Kartƒ± Stili (Ba≈ülangƒ±√ßta Gizli) */
        .content-card {
            max-width: 400px;
            opacity: 0;
            transform: translateY(50px) scale(0.8);
            transition: all 0.8s ease-out;
            display: none;
            z-index: 90;
        }

        .content-card.active {
            opacity: 1;
            transform: translateY(0) scale(1);
            display: block;
        }
        
        .content-card img {
            object-fit: cover;
            width: 100%;
            height: auto;
        }

        /* Mobil Cihazlar ƒ∞√ßin Ayarlamalar */
        @media (max-width: 640px) {
            .gift-box {
                width: 150px;
                height: 150px;
            }
            .content-card {
                max-width: 90%;
            }
            .ribbon-h { height: 20px; }
            .ribbon-v { width: 20px; }
        }

        /* KALPLER ƒ∞√áƒ∞N STƒ∞L */
        .heart {
            position: fixed;
            background-color: #ff4081; 
            transform: rotate(-45deg);
            pointer-events: none;
            z-index: 50; 
            opacity: 0;
            animation-name: heartFall; 
            animation-timing-function: linear;
            animation-fill-mode: forwards;
            /* Sonsuz d√∂ng√º */
            animation-iteration-count: infinite; 
        }
        .heart::before, .heart::after {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: inherit;
            border-radius: 50%;
        }
        .heart::before { top: -50%; left: 0; }
        .heart::after { top: 0; left: 50%; }
        @keyframes heartFall {
            /* Ba≈ülangƒ±√ßta ekranƒ±n √ºst√ºnden ba≈ülar (-50vh) */
            0% { transform: translateY(-50vh) rotate(-45deg) scale(1); opacity: 0.8; }
            /* Ekranƒ±n altƒ±na kadar d√º≈üer ve tekrar ba≈üa d√∂ner */
            100% { transform: translateY(150vh) rotate(360deg) scale(0.5); opacity: 0; } 
        }

        /* KONFETƒ∞ STƒ∞Lƒ∞ */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: var(--confetti-color);
            pointer-events: none;
            z-index: 60;
            opacity: 0;
            animation-name: confettiBlast;
            animation-timing-function: ease-out;
            animation-fill-mode: forwards;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .confetti.square { border-radius: 0; }
        .confetti.circle { border-radius: 50%; }
        .confetti.triangle { 
            width: 0; height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-bottom: 10px solid var(--confetti-color);
        }
        @keyframes confettiBlast {
            0% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; }
            100% { transform: translate(var(--end-x), var(--end-y)) scale(0.5) rotate(var(--rotate-deg)); opacity: 0; }
        }

        /* BALON STƒ∞Lƒ∞ */
        .balloon {
            position: fixed;
            width: 60px;
            height: 80px;
            background: radial-gradient(circle at 70% 30%, #fff, var(--balloon-color));
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            transform: translateY(100vh);
            z-index: 55;
            pointer-events: none;
            animation: balloonFloat 15s linear forwards; /* Daha uzun s√ºre */
        }
        .balloon::after { /* Balon Kuyruƒüu */
            content: '';
            position: absolute;
            width: 2px;
            height: 40px;
            background-color: var(--string-color);
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
        }
        @keyframes balloonFloat {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-20vh) rotate(30deg); opacity: 0.5; }
        }

        /* HAVAƒ∞ Fƒ∞≈ûEK STƒ∞Lƒ∞ */
        .firework {
            position: fixed;
            width: 0;
            height: 0;
            pointer-events: none;
            z-index: 70;
            top: var(--fw-top);
            left: var(--fw-left);
            opacity: 0;
            animation: fireworkGlow 0.8s ease-out forwards;
        }
        .firework-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background-color: var(--particle-color);
            animation: explode var(--duration) ease-out forwards;
        }
        @keyframes fireworkGlow {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }
        @keyframes explode {
            to {
                transform: translate(var(--dx), var(--dy));
                opacity: 0;
            }
        }

        /* Kutu A√ßƒ±lƒ±≈ü Animasyonu */
        .gift-box.opening {
            animation: giftBoxOpening 0.8s forwards;
            transform-origin: bottom center;
        }
        @keyframes giftBoxOpening {
            0% { transform: scale(1); }
            20% { transform: scale(1.02); }
            50% { transform: scale(0.95); opacity: 0.8; }
            100% { transform: scale(0.5); opacity: 0; visibility: hidden; }
        }

        /* Metin Yazma Animasyonu (GENEL) */
        .typing-container {
            display: inline-block;
            overflow: hidden;
            white-space: nowrap;
            width: 0; /* Ba≈ülangƒ±√ßta 0 geni≈ülik */
            border-right: 3px solid rgba(255, 255, 255, 0);
        }
        /* Yeni, daha akƒ±cƒ± animasyon tanƒ±mƒ± */
        @keyframes typing-smooth {
            from { width: 0; }
            to { width: 100%; }
        }
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #ff4081; }
        }

        /* YUMU≈ûATILMI≈û PARLAMA */
        .soft-glow-pink {
            text-shadow: 
                0 0 4px #fff,
                0 0 8px #ff007f,
                0 0 12px #ff007f;
            color: #ff007f; /* Ana metin rengi */
        }
        
        /* FOTOƒûRAF √áEKƒ∞M Sƒ∞M√úLASYONU STƒ∞Lƒ∞ */
        #camera-simulation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: black;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 500; /* En √ºstte olmalƒ± */
            overflow: hidden;
        }

        /* Romantik Kamera Arka Planƒ± */
        .romantic-camera-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0.8;
            background: radial-gradient(circle at center, rgba(255, 192, 203, 0.5), rgba(147, 112, 219, 0.5), transparent 70%);
            animation: subtleCameraGlow 10s ease-in-out infinite alternate;
        }

        @keyframes subtleCameraGlow {
            0% { transform: scale(1); opacity: 0.7; }
            100% { transform: scale(1.2); opacity: 0.9; }
        }

        .camera-screen {
            position: relative;
            width: 90%;
            max-width: 400px;
            height: 70%;
            background-color: #333;
            border: 8px solid #000;
            border-radius: 40px;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            overflow: hidden;
            z-index: 510;
        }

        .camera-viewfinder {
            flex-grow: 1;
            width: 100%;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .camera-controls {
            width: 100%;
            height: 80px;
            background-color: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 0 0 32px 32px;
            gap: 10px; /* Buton ve yazƒ± arasƒ±na bo≈üluk */
        }

        .shutter-button {
            width: 60px;
            height: 60px;
            background-color: #ccc;
            border-radius: 50%;
            border: 4px solid #fff;
            cursor: pointer;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            transition: background-color 0.1s;
        }

        .shutter-button:active {
            background-color: #aaa;
            transform: scale(0.95);
        }

        /* Fla≈ü Efekti */
        #flash-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            opacity: 0;
            z-index: 520;
            pointer-events: none;
        }

        /* Kamera Mesajƒ± */
        #camera-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.5rem; /* B√ºy√ºt√ºlm√º≈ü yazƒ± */
            font-weight: 800;
            text-align: center;
            color: white;
            opacity: 0;
            z-index: 530;
            /* Neon parlama */
            text-shadow: 
                0 0 5px #fff,
                0 0 10px #ff007f,
                0 0 20px #ff007f;
            display: none;
        }
        
        /* Yeni iki satƒ±rlƒ±k metin i√ßin stil */
        .camera-message-line {
            display: block;
            overflow: hidden;
            white-space: nowrap;
            width: 0;
            border-right: 3px solid rgba(255, 255, 255, 0);
            animation: blink-caret-cam 0.75s step-end infinite; /* ƒ∞mle√ß animasyonu */
        }
        .camera-message-line:last-child {
             margin-top: -10px; /* Satƒ±rlar arasƒ± bo≈üluk azaltma */
        }


        @keyframes typewriterCam {
            from { width: 0; }
            to { width: 100%; }
        }
        @keyframes blink-caret-cam {
            from, to { border-color: transparent }
            50% { border-color: white; }
        }

        /* PASTA ALANI STƒ∞Lƒ∞ */
        #cake-display {
            display: none; /* Ba≈ülangƒ±√ßta gizli */
            width: 100%;
            max-width: 450px; /* Biraz daha geni≈ü pasta i√ßin */
            text-align: center;
            z-index: 95;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            flex-direction: column;
            align-items: center;
        }

        /* Mumlar ve Alev Animasyonu */
        .candle-wrapper {
            position: absolute; 
            /* Pasta emojisinin √ºzerine tam oturmasƒ± i√ßin ayarlandƒ± */
            top: 15px; 
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            gap: 15px; 
            z-index: 20; 
        }

        /* Pasta Boyutu Artƒ±rƒ±ldƒ± */
        #cake-emoji {
             font-size: 10rem; 
             margin-bottom: 50px; /* Pasta ile butonlar arasƒ±nda bo≈üluk bƒ±rakmak i√ßin */
        }
        
        .candle {
            width: 10px;
            height: 40px;
            background-color: #fff;
            position: relative; 
            border-radius: 2px;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }

        .flame {
            width: 8px;
            height: 15px;
            background-color: #ffcc00;
            position: absolute;
            top: -10px;
            left: 1px;
            border-radius: 50%;
            box-shadow: 0 0 5px #ffcc00, 0 0 10px #ffa500;
            animation: flicker 0.2s infinite alternate;
            transition: opacity 1.5s ease-out; /* S√∂nme s√ºresi artƒ±rƒ±ldƒ± */
            opacity: 1;
        }

        .flame.out {
            opacity: 0;
        }

        @keyframes flicker {
            0% { transform: translateY(0); box-shadow: 0 0 5px #ffcc00, 0 0 10px #ffa500; }
            100% { transform: translateY(-1px); box-shadow: 0 0 6px #ffcc00, 0 0 12px #ffa500; }
        }

        /* Buket Hediyesi */
        #flower-bouquet {
            opacity: 0;
            transition: opacity 1s ease-in;
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #flower-bouquet.show {
            opacity: 1;
        }
        .bouquet-stem {
            width: 150px;
            height: 150px;
            background: radial-gradient(circle at 10% 90%, #ffc0cb, #f48fb1);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .bouquet-wrap {
            position: absolute;
            width: 100px;
            height: 120px;
            background-color: #ffd700;
            clip-path: polygon(0 0, 100% 0, 70% 100%, 30% 100%);
            z-index: -1;
            opacity: 0.8;
        }
        .bouquet-heart {
            font-size: 3rem;
            color: #e91e63;
            transform: rotate(-10deg);
        }

        /* Uyarƒ± Kutusu */
        .warning-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #f44336;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 200;
            opacity: 0;
            transition: opacity 0.5s ease;
        }


    </style>
</head>
<body id="body">

    <!-- Romantik √ái√ßek Arka Planƒ± --><div class="flower-background"></div>

    <!-- Kamera Sim√ºlasyonu --><div id="camera-simulation">
        <div class="romantic-camera-bg"></div> <!-- Romantik Arka Plan --><div class="camera-screen">
            <div class="camera-viewfinder">
                <p class="text-white opacity-50 text-xl font-light">√ñn Kamera A√ßƒ±k...</p>
                <div id="flash-overlay"></div>
            </div>
            <div class="camera-controls">
                <span class="text-white text-sm">Fotoƒüraf √áekmek ƒ∞√ßin Tƒ±kla</span>
                <div class="shutter-button" onclick="takePicture()"></div>
            </div>
        </div>
        <div id="camera-message" class="text-3xl sm:text-4xl md:text-5xl">
             <!-- ƒ∞ki Satƒ±r Halinde Yeni Metin Yapƒ±sƒ± --><span id="cam-line1" class="camera-message-line"></span>
             <span id="cam-line2" class="camera-message-line"></span>
        </div>
    </div>

    <!-- Hediye Kutusu ve ƒ∞√ßerik --><div id="instruction" class="mb-8 text-xl font-semibold text-pink-700 transition-opacity duration-500 ease-in-out">
        ‚ù§Ô∏è Hediye Kutuna Tƒ±kla Sevgilim ‚ù§Ô∏è
    </div>

    <div id="giftBoxContainer" class="relative">
        <div id="giftBox" class="gift-box" onclick="openGift(this)">
            <div class="ribbon-h"></div>
            <div class="ribbon-v"></div>
            <div id="boxLid" class="box-lid"></div>
            <span class="text-white text-3xl font-bold z-20" style="position: relative; top: -10px;">üéÅ</span>
        </div>
    </div>
    
    <div id="contentCard" class="content-card bg-white p-6 md:p-8 rounded-xl shadow-2xl mt-12 border-4 border-pink-400">
        <h2 id="title-text" class="text-3xl md:text-4xl font-extrabold text-pink-600 mb-4 tracking-tight soft-glow-pink">
            <span class="typing-container" id="typing-line1">ƒ∞yi ki Doƒüdun</span><br>
            <span class="typing-container" id="typing-line2">Sevgilim! ‚ù§Ô∏è</span>
            <br>
            <span class="typing-container text-2xl font-bold text-purple-600 soft-glow-pink" id="typing-ilkim"></span> <!-- ƒ∞lkim ismini buraya ekledik --></h2>
        <p class="text-gray-700 text-lg mb-4">
            Seninle ge√ßen her an, en g√ºzel hediyem. G√∂zlerin gibi parlak, kalbin gibi sƒ±cak bir yƒ±l diliyorum. Seni √ßok seviyorum!
        </p>
        
        <img id="photo" 
             src="[BURAYA KENDƒ∞ FOTOƒûRAF ADINIZI YAZIN.jpg]" 
             onerror="this.onerror=null; this.src='https://placehold.co/400x300/e91e63/ffffff?text=Fotoƒüraf+yok.+G√∂rmek+i√ßin+l√ºtfen+bir+fotoƒüraf+y√ºkleyin!';" 
             alt="Sevgilinizle Olan Fotoƒürafƒ±nƒ±z"
             class="rounded-lg shadow-lg mt-4 w-full h-auto max-h-[300px] shadow-xl">
        
        <p class="text-sm mt-4 text-gray-500">
            (Bu kutucuk sana √∂zel, k√º√ß√ºk bir hatƒ±ra.)
        </p>

        <button id="camera-btn" onclick="startCameraSimulation()" class="mt-6 w-full p-3 bg-pink-500 text-white font-bold rounded-lg shadow-lg hover:bg-pink-600 transition duration-300 transform hover:scale-105">
            Bir Fotoƒüraf √áek!
        </button>
        <button id="cake-btn" onclick="showCake()" class="mt-3 w-full p-3 bg-gray-400 text-white font-bold rounded-lg shadow-lg cursor-not-allowed transition duration-300" disabled>
            Pastanƒ± G√∂r
        </button>
    </div>

    <!-- PASTA G√∂r√ºnt√ºleme Alanƒ± -->
    <div id="cake-display" class="pt-10"> <!-- ƒ∞√ßerik Kartƒ±ndan daha a≈üaƒüƒ± √ßekmek i√ßin √ºst bo≈üluk artƒ±rƒ±ldƒ± -->
        <h2 class="text-3xl font-extrabold text-pink-600 mb-8 soft-glow-pink">ƒ∞yi ki Doƒüdun ƒ∞lkim!</h2> 
        
        <!-- YENƒ∞ PASTA G√ñRSELƒ∞ (EMOJI) VE MUMLAR -->
        <div id="cake-visual-container" class="relative flex justify-center w-full mt-10">
            <!-- Pasta Emojisi -->
            <div id="cake-emoji" class="text-[10rem] leading-none mb-4">üéÇ</div> <!-- Boyut artƒ±rƒ±ldƒ± -->
            
            <!-- Mumlar (Pasta Emojisi √úzerine Konumlandƒ±rƒ±ldƒ±) -->
            <div class="candle-wrapper" style="top: 0px;"> 
                <!-- 3 Mum -->
                <div class="candle">
                    <div class="flame"></div>
                </div>
                <div class="candle">
                    <div class="flame"></div>
                </div>
                <div class="candle">
                    <div class="flame"></div>
                </div>
            </div>
        </div>
        <!-- /YENƒ∞ PASTA G√ñRSELƒ∞ VE MUMLAR -->

        <!-- Buket Hediyesi Alanƒ± (Mumlar S√∂n√ºnce G√∂r√ºnecek) -->
        <div id="flower-bouquet">
            <p class="text-xl font-semibold text-green-600 mb-4">Dileƒüin Ger√ßekle≈üti!</p>
            <div class="bouquet-stem">
                <div class="bouquet-wrap"></div>
                <span class="bouquet-heart">üíê</span>
            </div>
            <p class="text-lg font-bold text-gray-700 mt-2">En G√ºzel Hediyem Sana</p>
        </div>


        <button id="blow-out-btn" onclick="blowOutCandles()" class="mt-6 w-full p-3 bg-pink-500 text-white font-bold rounded-lg shadow-lg hover:bg-pink-600 transition duration-300 transform hover:scale-105">
            Dilek Tut ve √úfle!
        </button>
        <button id="cake-return-btn" onclick="hideCake()" class="mt-3 w-full p-3 bg-purple-500 text-white font-bold rounded-lg shadow-lg hover:bg-purple-600 transition duration-300 transform hover:scale-105" style="display:none;">
            Geri D√∂n
        </button>
    </div>

    <!-- Uyarƒ± Mesajƒ± Kutusu -->
    <div id="warning-box" class="warning-message"></div>

    <script>
        // M√ºzik notalarƒ± (Happy Birthday)
        const notes = [
            // ƒ∞lk satƒ±r
            { note: 'C4', duration: '4n', time: 0 },
            { note: 'C4', duration: '4n', time: 0.5 },
            { note: 'D4', duration: '2n', time: 1 },
            { note: 'C4', duration: '2n', time: 2 },
            { note: 'F4', duration: '2n', time: 3 },
            { note: 'E4', duration: '2n', time: 4 },

            // ƒ∞kinci satƒ±r
            { note: 'C4', duration: '4n', time: 5 },
            { note: 'C4', duration: '4n', time: 5.5 },
            { note: 'D4', duration: '2n', time: 6 },
            { note: 'C4', duration: '2n', time: 7 },
            { note: 'G4', duration: '2n', time: 8 },
            { note: 'F4', duration: '2n', time: 9 },

            // √ú√ß√ºnc√º satƒ±r
            { note: 'C4', duration: '4n', time: 10 },
            { note: 'C4', duration: '4n', time: 10.5 },
            { note: 'C5', duration: '2n', time: 11 },
            { note: 'A4', duration: '2n', time: 12 },
            { note: 'F4', duration: '4n', time: 13 },
            { note: 'E4', duration: '4n', time: 13.5 },
            { note: 'D4', duration: '2n', time: 14 },

            // D√∂rd√ºnc√º satƒ±r
            { note: 'Bb4', duration: '4n', time: 15 },
            { note: 'Bb4', duration: '4n', time: 15.5 },
            { note: 'A4', duration: '2n', time: 16 },
            { note: 'F4', duration: '2n', time: 17 },
            { note: 'G4', duration: '2n', time: 18 },
            { note: 'F4', duration: '2n', time: 19 },
        ];

        let cameraMessageElement;
        let isGiftOpened = false;
        let isHeartShowerActive = false; // Kalp d√∂ng√ºs√º kontrol√º

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('giftBox').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('giftBox').style.transition = 'opacity 1s ease, transform 0.5s ease, box-shadow 0.3s ease';
                document.getElementById('giftBox').style.opacity = '1';
            }, 100);

            cameraMessageElement = document.getElementById('camera-message');
            
            // Ba≈ülangƒ±√ßta pastayƒ± g√∂r butonu pasif
            const cakeBtn = document.getElementById('cake-btn');
            cakeBtn.disabled = true;
            cakeBtn.classList.add('cursor-not-allowed', 'opacity-50');
            cakeBtn.classList.remove('hover:bg-pink-600');
            
            // Sayfa y√ºklenince s√ºrekli kalp yaƒümurunu ba≈ülat
            startHeartShower();
        });

        // Hediye kutusunu a√ßma i≈ülevi
        function openGift(box) {
            if (isGiftOpened) return; 
            isGiftOpened = true;

            const boxLid = document.getElementById('boxLid');
            const contentCard = document.getElementById('contentCard');
            const instruction = document.getElementById('instruction');
            const body = document.getElementById('body');

            // Kutu Tƒ±klanƒ±nca Geri √áekilme Efekti
            box.classList.add('retracting');
            setTimeout(() => box.classList.remove('retracting'), 100);
            
            // Parlama ve M√ºzik
            body.classList.add('glow-effect'); 
            playBirthdaySound();
            
            startConfettiBlast();
            startBalloonFloat();
            startFireworkShow();

            // Kapaƒüƒ± yukarƒ± doƒüru hareket ettir
            boxLid.style.transform = 'rotateX(90deg) translateY(-200px) scale(0.5)';
            boxLid.style.opacity = '0';
            
            // Kutu ve talimatƒ± gizle
            box.classList.add('opening');
            instruction.style.opacity = '0';

            // ƒ∞√ßerik kartƒ±nƒ± g√∂sterme zamanlayƒ±cƒ±sƒ±
            setTimeout(() => {
                document.getElementById('giftBoxContainer').style.display = 'none';
                instruction.style.display = 'none';
                
                // Romantik Arka Planƒ± Uygula
                body.classList.add('romantic-bg');

                // ƒ∞√ßerik kartƒ±nƒ± g√∂r√ºn√ºr yap
                contentCard.classList.add('active');
                
                // Yazma animasyonunu ba≈ülat
                startTypingAnimation();
            }, 800);
        }

        // Ana ba≈ülƒ±k ve isim yazma animasyonu
        function startTypingAnimation() {
            const line1 = document.getElementById('typing-line1');
            const line2 = document.getElementById('typing-line2');
            const ilkimText = document.getElementById('typing-ilkim');
            
            // "ƒ∞yi ki Doƒüdun" (13 karakter)
            line1.style.animation = 'typing-smooth 0.8s linear forwards, blink-caret 0.75s step-end infinite';
            
            // "Sevgilim! ‚ù§Ô∏è" (10 karakter + emoji)
            setTimeout(() => {
                line1.style.borderRight = 'none'; 
                line2.style.animation = 'typing-smooth 0.7s linear forwards, blink-caret 0.75s step-end infinite';
            }, 800); 

            // "ƒ∞lkim" ismini yaz
            setTimeout(() => {
                line2.style.borderRight = 'none';
                ilkimText.textContent = "ƒ∞lkim"; // Metni ayarla
                ilkimText.style.animation = 'typing-smooth 0.5s linear forwards, blink-caret 0.75s step-end infinite';
            }, 1500); // 0.8s + 0.7s = 1.5s sonra ba≈üla

            // ƒ∞lkim yazƒ±sƒ± bittikten sonra imleci gizle
            setTimeout(() => {
                ilkimText.style.borderRight = 'none';
            }, 2000); // 1.5s + 0.5s = 2.0s
        }

        // M√ºzik √ßalma i≈ülevi
        async function playBirthdaySound() {
            await Tone.start();
            const synth = new Tone.Synth({
                oscillator: { type: 'sine' },
                envelope: {
                    attack: 0.005,
                    decay: 0.1,
                    sustain: 0.3,
                    release: 1
                }
            }).toDestination();
            
            const now = Tone.now();

            // Notalarƒ± √ßal
            notes.forEach(note => {
                synth.triggerAttackRelease(note.note, note.duration, now + note.time);
            });
        }

        /* --- Vƒ∞SUAL EFEKTLER (KALP, KONFETƒ∞, BALON, HAVAƒ∞ Fƒ∞≈ûEK) --- */

        // Sonsuz Kalp Yaƒümuru
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            const size = Math.random() * 20 + 15; 
            heart.style.width = size + 'px';
            heart.style.height = size + 'px';
            heart.style.left = Math.random() * 100 + 'vw';
            const duration = Math.random() * 5 + 6; 
            heart.style.animationDuration = duration + 's';
            heart.style.animationDelay = Math.random() * 1.5 + 's';
            const colors = ['#ff4081', '#e91e63', '#f48fb1'];
            heart.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            document.body.appendChild(heart);
            // Animasyon bitince kalbi sil ve yenisini olu≈ütur (Sonsuz d√∂ng√º)
            heart.addEventListener('animationend', () => { heart.remove(); createHeart(); });
        }

        function startHeartShower() { 
            if (isHeartShowerActive) return;
            isHeartShowerActive = true;
            // ƒ∞lk kalp grubunu ba≈ülat
            for(let i = 0; i < 40; i++) { setTimeout(createHeart, i * 150); } 
            // Sonraki kalpler animationend event'i ile kendi kendini tetikleyecek
        }

        function createConfetti() {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            const shapes = ['square', 'circle', 'triangle'];
            confetti.classList.add(shapes[Math.floor(Math.random() * shapes.length)]);
            const colors = ['#ffeb3b', '#8bc34a', '#2196f3', '#f44336', '#9c27b0', '#ff9800', '#f48fb1'];
            confetti.style.setProperty('--confetti-color', colors[Math.floor(Math.random() * colors.length)]);
            const endX = (Math.random() - 0.5) * window.innerWidth * 1.5;
            const endY = (Math.random() - 0.5) * window.innerHeight * 1.5;
            const rotateDeg = Math.random() * 720 - 360;
            confetti.style.setProperty('--end-x', endX + 'px');
            confetti.style.setProperty('--end-y', endY + 'px');
            confetti.style.setProperty('--rotate-deg', rotateDeg + 'deg');
            confetti.style.animationDuration = (Math.random() * 2 + 1) + 's';
            confetti.style.animationDelay = (Math.random() * 0.5) + 's';
            document.body.appendChild(confetti);
            confetti.addEventListener('animationend', () => { confetti.remove(); });
        }
        // Konfeti sayƒ±sƒ± 3 katƒ±na √ßƒ±karƒ±ldƒ±
        function startConfettiBlast() { const numConfetti = 240; for (let i = 0; i < numConfetti; i++) { createConfetti(); } }

        function createBalloon() {
            const balloon = document.createElement('div');
            balloon.classList.add('balloon');
            const colors = ['#ffb6c1', '#dda0dd', '#9370db'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            balloon.style.setProperty('--balloon-color', randomColor);
            balloon.style.setProperty('--string-color', '#555');
            // Balonlarƒ±n ekranƒ±n tamamƒ±ndan ba≈ülamasƒ± i√ßin left/delay ayarlarƒ±
            balloon.style.left = Math.random() * 100 + 'vw';
            balloon.style.animationDuration = (Math.random() * 10 + 10) + 's'; // 10-20s daha yava≈ü
            balloon.style.animationDelay = (Math.random() * 5) + 's'; // 0-5s arasƒ±nda rastgele ba≈ülama
            document.body.appendChild(balloon);
            balloon.addEventListener('animationend', () => { balloon.remove(); });
        }
        function startBalloonFloat() { for(let i = 0; i < 15; i++) { setTimeout(createBalloon, i * 400); } } // Daha fazla balon ve gecikmeli ba≈ülatma

        function createFirework() {
            const firework = document.createElement('div');
            firework.classList.add('firework');
            const fwTop = Math.random() * 50 + 5 + 'vh';
            const fwLeft = Math.random() * 80 + 10 + 'vw';
            firework.style.setProperty('--fw-top', fwTop);
            firework.style.setProperty('--fw-left', fwLeft);
            document.body.appendChild(firework);

            const numParticles = 30;
            const particleColors = ['#ffcc00', '#ff66b2', '#00ffff', '#ffffff'];

            for (let i = 0; i < numParticles; i++) {
                const particle = document.createElement('div');
                particle.classList.add('firework-particle');
                
                const angle = Math.random() * 2 * Math.PI;
                const distance = Math.random() * 80 + 20; 
                const dx = Math.cos(angle) * distance + 'px';
                const dy = Math.sin(angle) * distance + 'px';
                
                particle.style.setProperty('--dx', dx);
                particle.style.setProperty('--dy', dy);
                particle.style.setProperty('--duration', (Math.random() * 1 + 1.5) + 's');
                particle.style.setProperty('--particle-color', particleColors[Math.floor(Math.random() * particleColors.length)]);
                
                firework.appendChild(particle);
            }
            firework.addEventListener('animationend', () => { firework.remove(); });
        }
        // Havai fi≈üek sayƒ±sƒ± artƒ±rƒ±ldƒ±
        function startFireworkShow() { for (let i = 0; i < 24; i++) { setTimeout(createFirework, i * 250 + 500); } }

        /* --- KAMERA Sƒ∞M√úLASYONU ƒ∞≈ûLEVLERƒ∞ --- */

        // Kamera mesajƒ± yazma animasyonu
        function startCameraMessageTyping() {
            const line1 = document.getElementById('cam-line1');
            const line2 = document.getElementById('cam-line2');
            
            line1.textContent = "D√ºnyanƒ±n En G√ºzel"; // Metinleri ayarlama
            line2.textContent = "Kƒ±zƒ±";
            
            // "D√ºnyanƒ±n En G√ºzel" (18 karakter)
            line1.style.animation = 'typing-smooth 1.2s linear forwards, blink-caret 0.75s step-end infinite'; 
            
            // ƒ∞kinci satƒ±rƒ± ba≈ülatmak i√ßin bekle
            setTimeout(() => {
                line1.style.borderRight = 'none';
                // "Kƒ±zƒ±" (4 karakter)
                line2.style.animation = 'typing-smooth 0.4s linear forwards, blink-caret 0.75s step-end infinite';
            }, 1200); 

            // ƒ∞kinci satƒ±r bittikten sonra imleci gizle
            setTimeout(() => {
                line2.style.borderRight = 'none';
            }, 1600); 
        }

        function startCameraSimulation() {
            document.getElementById('contentCard').style.display = 'none';
            document.getElementById('cake-display').style.display = 'none'; // Pasta a√ßƒ±ksa kapat
            document.getElementById('camera-simulation').style.display = 'flex';
        }

        // Deklan≈ü√∂r sesi
        const shutterSynth = new Tone.NoiseSynth({
            noise: { type: "white" },
            envelope: {
                attack: 0.001,
                decay: 0.1,
                sustain: 0,
            }
        }).toDestination();

        function takePicture() {
            const flash = document.getElementById('flash-overlay');
            const messageContainer = document.getElementById('camera-message');
            const cakeBtn = document.getElementById('cake-btn');
            
            // Deklan≈ü√∂r sesi
            shutterSynth.triggerAttackRelease("8n");

            // Fla≈ü patlamasƒ± (daha uzun ve yava≈ü)
            flash.style.transition = 'opacity 0.2s linear';
            flash.style.opacity = 1;
            
            setTimeout(() => {
                flash.style.transition = 'opacity 1.5s ease-out';
                flash.style.opacity = 0;
            }, 200);

            // Mesajƒ± g√∂ster (Fla≈ü s√∂nmeye ba≈üladƒ±ƒüƒ±nda)
            setTimeout(() => {
                messageContainer.style.display = 'block';
                messageContainer.style.opacity = 1;
                
                // Animasyonu ba≈ülatmadan √∂nce sƒ±fƒ±rla
                document.getElementById('cam-line1').style.width = '0';
                document.getElementById('cam-line2').style.width = '0';
                document.getElementById('cam-line1').style.animation = 'none';
                document.getElementById('cam-line2').style.animation = 'none';
                
                startCameraMessageTyping(); // Yeni iki satƒ±rlƒ± animasyonu ba≈ülat
            }, 500); 

            // Sim√ºlasyondan karta geri d√∂n
            setTimeout(() => {
                document.getElementById('camera-simulation').style.display = 'none';
                document.getElementById('contentCard').style.display = 'block';
                // Mesajƒ± gizle ve sƒ±fƒ±rla
                messageContainer.style.opacity = 0;
                messageContainer.style.display = 'none';

                // FOTOƒûRAF √áEKƒ∞LDƒ∞KTEN SONRA RESMƒ∞ G√úNCELLE
                const mainPhoto = document.getElementById('photo');
                mainPhoto.src = 'dgresim.jpeg'; // GitHub'daki dosya adƒ±
                mainPhoto.onerror = null; 

                // PASTA BUTONUNU AKTƒ∞F ET
                cakeBtn.disabled = false;
                cakeBtn.classList.remove('cursor-not-allowed', 'opacity-50', 'bg-gray-400');
                cakeBtn.classList.add('bg-pink-500', 'hover:bg-pink-600');
            }, 4500); 
        }

        // Uyarƒ± mesajƒ±nƒ± g√∂steren fonksiyon
        function showWarning(message) {
            const warningBox = document.getElementById('warning-box');
            warningBox.textContent = message;
            warningBox.style.opacity = 1;
            setTimeout(() => {
                warningBox.style.opacity = 0;
            }, 2000);
        }

        // Pastayƒ± g√∂sterme i≈ülevi
        function showCake() {
            const cakeBtn = document.getElementById('cake-btn');

            if (cakeBtn.disabled) {
                showWarning("√ñnce 'Bir Fotoƒüraf √áek!' butonuna tƒ±klayarak fotoƒüraf √ßekmelisin!");
                return;
            }

            // Mumlarƒ± sƒ±fƒ±rla ve √ºfleme butonunu g√∂ster
            document.querySelectorAll('.flame').forEach(flame => flame.classList.remove('out'));
            document.getElementById('flower-bouquet').classList.remove('show');
            document.getElementById('blow-out-btn').style.display = 'block';
            document.getElementById('cake-return-btn').style.display = 'none';
            document.getElementById('cake-emoji').style.display = 'block'; // Emoji g√∂ster
            document.querySelectorAll('.candle').forEach(c => c.style.display = 'block'); // Mumlarƒ± g√∂ster

            document.getElementById('contentCard').style.display = 'none';
            document.getElementById('cake-display').style.display = 'flex';
            document.body.classList.add('romantic-bg'); // Tema korunuyor
        }

        // Mumlarƒ± √ºfleme i≈ülevi
        function blowOutCandles() {
            document.querySelectorAll('.flame').forEach(flame => flame.classList.add('out'));
            
            // Mumlar s√∂n√ºnce havai fi≈üek ve konfeti ≈üovu ba≈ülat
            startFireworkShow();
            startConfettiBlast(); 

            // Hediye (Buket) g√∂rselini g√∂ster
            setTimeout(() => {
                document.getElementById('flower-bouquet').classList.add('show');
                document.getElementById('blow-out-btn').style.display = 'none';
                document.getElementById('cake-emoji').style.display = 'none'; // Emoji gizle
                document.querySelectorAll('.candle').forEach(c => c.style.display = 'none'); // Mumlarƒ± gizle
                document.getElementById('cake-return-btn').style.display = 'block';
            }, 500);
        }

        // Pastadan geri d√∂nme i≈ülevi
        function hideCake() {
            document.getElementById('cake-display').style.display = 'none';
            document.getElementById('contentCard').style.display = 'block';
        }

    </script>
</body>
</html>
